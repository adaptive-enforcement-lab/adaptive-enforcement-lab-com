---
repos:
  - repo: https://github.com/igorshubovych/markdownlint-cli
    rev: v0.47.0
    hooks:
      - id: markdownlint
        args: ["--config", ".markdownlint.yml"]
        files: \.md$
        exclude: ^(CHANGELOG\.md|\.content-machine/.*|docs/includes/.*)$
  - repo: https://github.com/adaptive-enforcement-lab/readability
    rev: v3.0.1
    hooks:
      - id: readability-docs
        name: check documentation readability
  - repo: local
    hooks:
      - id: check-forbidden-tech
        name: block forbidden technologies
        entry: scripts/check-forbidden-tech.sh
        language: script
        files: \.(md|yaml|yml|sh|tf|Dockerfile|Containerfile)$
        pass_filenames: true
      - id: check-description
        name: check description frontmatter
        entry: scripts/check-description.sh
        language: script
        files: \.md$
        exclude: ^docs/includes/.*$
        pass_filenames: true
      - id: check-title
        name: check title frontmatter
        entry: scripts/check-title.sh
        language: script
        files: \.md$
        exclude: ^docs/includes/.*$
        pass_filenames: true
      - id: mkdocs-build
        name: mkdocs build
        entry: >-
          bash -c 'if [ -f .venv/bin/mkdocs ]; then
          .venv/bin/mkdocs build --strict; else
          mkdocs build --strict; fi'
        language: system
        pass_filenames: false
        files: \.(md|yml|yaml)$
