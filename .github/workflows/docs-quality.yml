name: Documentation Quality

on:
  workflow_call:
    inputs:
      fail_on_threshold:
        description: 'Fail the workflow if thresholds are exceeded'
        type: boolean
        default: true

permissions:
  contents: read

jobs:
  analyze:
    name: Analyze Documentation
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v6

      - name: Analyze documentation
        id: readability
        uses: adaptive-enforcement-lab/readability@0.3.1
        with:
          path: docs/
          format: report
          check: ${{ inputs.fail_on_threshold }}

      - name: Add report to summary
        run: echo "${{ steps.readability.outputs.report }}" >> "$GITHUB_STEP_SUMMARY"
