name: Documentation Quality

on:
  workflow_call:
    inputs:
      fail_on_threshold:
        description: 'Fail the workflow if thresholds are exceeded'
        type: boolean
        default: true

permissions:
  contents: read

jobs:
  analyze:
    name: Analyze Documentation
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v6

      - name: Generate readability report
        uses: adaptive-enforcement-lab/readability@v0.1.1
        with:
          path: docs/
          format: markdown

      - name: Check readability thresholds
        if: inputs.fail_on_threshold
        uses: adaptive-enforcement-lab/readability@v0.1.1
        with:
          path: docs/
          check: 'true'

      - name: Check readability thresholds (warn only)
        if: ${{ !inputs.fail_on_threshold }}
        continue-on-error: true
        uses: adaptive-enforcement-lab/readability@v0.1.1
        with:
          path: docs/
          check: 'true'
